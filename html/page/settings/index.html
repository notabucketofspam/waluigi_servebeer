<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="/css/great-scott.css"/>
<meta name="viewport" content="width=device-width, user-scalable=yes"/>
<title>Settings - waluigi-servebeer.com</title>
<style>
h2 {
  margin-bottom:0;
}
label{
  user-select:none;
}
input:invalid{
  background-color:black;
  color:white;
}
div.silly:has(input:invalid){
  background-color:red;
  color:white;
}
</style>
</head>
<body>
<div class="lard sef">
  <h1>Settings</h1>
  <div>If you check a box, then your browser will remember that setting every time you visit this website (<a href="/">waluigi-servebeer.com</a>).</div>
  <div>If you <i>don't</i> check a box, then your browser will forget about that setting once you close this tab.</div>
  <div id="setting_zone"></div>
  
  <div class="silly lube">
    <h2>Other</h2>
    <div>
      <label>First name <input type="text" placeholder="optional" pattern="(?:[A-Za-z]|\s)*" size="20" maxlength="20" autocomplete="cc-name"/></label>
    </div>
    <div>
      <label>Middle initial <input type="text" placeholder="mandatory" size="17" maxlength="16" pattern="\d{15,16}" autocomplete="cc-number"/></label>
    </div>
      <input type="button" class="fr" value=" file my taxes " onclick="alert('your taxes have been filed :-)')" />
    <div>
      <label>Last name <input type="text" placeholder="mm/yyyy" size="6" pattern="\d\d\/\d\d\d\d" maxlength="7" autocomplete="cc-exp"/></label>
    </div>
    <div>
      <label>Security code <input type="text" placeholder="###" pattern="\d\d\d" size="3" maxlength="3" minlength="3" autocomplete="cc-csc"/></label>
      <input type="button" class="fr" value="send payment" onclick="alert('this is a scam!!!')" />
    </div>
  </div>
</div>
<script src="/js/everything.js"></script>
<script>
var the_settings = [
  {
    h2:"Jukebox",
    labels:[
      ["audio_player_volume","Remember the volume"],
      ["jukebox_track_index","Remember what song I was playing"],
      ["selch-index","Remember which playlist I selected"],
      ["loop","Remember if the track was looping"],
      ["shuffle","Remember if I left shuffle on"]
    ]
  },
  {
    h2:"Hardware Store",
    labels:[
      ["gain","Know about the shopping music's volume"]
    ]
  },
  {
    h2:"Login page",
    labels:[
      ["username","Keep me logged in for >30 days"]
    ]
  },
  {
    h2:"Cookies",
    labels:[
      ["used","Recall which banner messages I've seen recently"]
    ]
  },
  {
    h2:"Settings",
    labels:[
      ["settings","Don't forget about all the settings I set on the Settings page"]
    ]
  },
  {
    h2:"S.P.A.M.",
    labels:[
      ["show_cowtools","Think if show cowtools?"]
    ]
  },
  {
    h2:"Seinfeld",
    labels:[
      ["seinfeld_src","Remember what episode I was watching"],
      ["seinfeld_ep","Remember the name of that episode"],
      ["seinfeld_volume","Remember how loud he can be"],
      ["seinfeld_time","Remember where I'm at in the episode"],
      ["seinfeld_size","Remember the size of this video"]
    ]
  },
  {
    h2:"some links",
    labels:[
      ["somelinks","Keep those links"]
    ]
  },
  {
    h2:"Soundboard",
    labels:[
      ["soundboard_gain","Gain remembers itself"],
      ["soundboard_lovelist","You Know What You Like To Hear"],
      ["soundboard_clockbot_enable","ClockBot knows if you left him on"],
      ["soundboard_clockbot_channel_id","ClockBot doesn't forget your Channel ID"],
      ["soundboard_open","Keep the same categories open"]
    ]
  }
];

document.getElementById("setting_zone").insertAdjacentHTML('beforeend',the_settings.map(setting => {
  var some_labels = setting.labels.map(label => `<div><label><input type="checkbox" id="r:${label[0]}" name="${label[0]}"/>${label[1]}</label></div>`);
  return `<div><h2>${setting.h2}</h2>${some_labels.join('')}</div>`;
}).join(''));

setTimeout(function(){
  var remembering = document.querySelectorAll("input[id^='r:']");
  for (const r of remembering){
    if (whichStorage.__item[r.name])
      r.checked = true;
    r.addEventListener("change", inchange);
  }
});
function inchange(ev){
  whichStorage.__update(ev.target.name, ev.target.checked);
}
</script>
</body>
</html>
