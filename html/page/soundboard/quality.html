<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="/css/great-scott.css"/>
<meta name="viewport" content="width=device-width, user-scalable=yes"/>
<title>Soundboard - waluigi-servebeer.com</title>
<style>
details.sb#love_zone>summary>h2{
  position:relative;
  margin-bottom:revert;
}
#love_zone[open]{
  min-height:8.1lh;
}
#love_zone>summary:has(+ #love_children:not(:empty)){
  color:red;
}
:where(#booba,#love_zone) button {
  margin:2px;
  position:relative;
}
#topstuff{
  text-align:center;
}
input{
  accent-color:red;
}
div.sef.lard *{
  user-select:none;
}
#greatanswer{
  margin-bottom:0;
  /*position:absolute;*/
  /*bottom:-90px;*/
  /*right:-45px;*/
}
#where_help{
  font-size:xx-small;
  padding:1px 3.5px;
  cursor:help;
}
div#how2love{
  position:absolute;
  font-size:initial;
}
button.loved::before{
  content:"<3";
  position:absolute;
  color:white;
  background-color:red;
  font-weight:bold;
  transform:rotate(270deg);
  left:4px;
  top:33%;
  font-size:1lh;
}
.sounds {
  display: grid;
  grid: auto-flow 3lh / repeat(5, 1fr);
}
@media (max-width:600px){
  .sounds {
    display: grid;
    grid: auto-flow 3lh / repeat(3, 1fr);
  }
}
details.sb>summary>h2{
  display:inline-block;
  margin-bottom:0;
  font-size:2rem;
}
details.sb>summary{
  max-width:fit-content;
}
</style>
</head>
<body>
<div oncontextmenu="event.preventDefault()">
<div class="sef lard">

  <div id="topstuff">
    <h1>Soundboard</h1>
    <div>
      <div><input id="somevolume" type="range" step="any" min="0" max="1" value="0.0" oninput="setgain(this.valueAsNumber)"/></div>
      <div>Volume</div>
    </div>
  </div>
  
  <details id="love_zone" class="sb">
    <summary>
      <h2>
        The Sounds You Love
        <div id="how2love">You can love them with right-click</div>
      </h2>
    </summary>
    <div id="love_children" class="sounds"></div>
  </details>
  
  <div id="booba"></div>
  
  <details id="clockbot_zone" class="sb">
    <summary><h2>ClockBot</h2></summary>
    <div style="position:relative">
      <div>
        <div>
          <label><input type="checkbox" id="clockbot_enable"/>Enable</label>
          <a href="https://discord.com/oauth2/authorize?client_id=821257635973169193" target="_blank" style="display:inline-block;margin-left:68px;">Install</a>
        </div>
        <div>
          <input type="text" placeholder="Channel ID" id="channel_id" value=""/>
          <button id="where_help" popovertarget="greatanswer">where?</button>
        </div>
        <div>
          <button onclick="getinchat()">get in chat</button>
          <button onclick="leave_chat()">leave chat</button>
        </div>
      </div>
        <dialog id="greatanswer" popover>
          <div>Where's Channel ID? Great question! So...</div>
          <ol style="margin:0">
            <li>Go to &#x26ED;User Settings &rArr; App Settings &ndash; Advanced</li>
            <li>Flip the <b>Developer Mode</b> switch to the <b>on</b> position</li>
            <li>Right-click on a voice channel</li>
            <li><b>Copy Channel ID</b> is at the bottom of the context menu</li>
          </ol>
        </dialog>
    </div>
  </details>
  
</div>
</div>
<script src="/js/everything.js"></script>
<script src="/page/soundboard/cacophony.js"></script>
<script>
whichStorage["soundboard_gain"] ??= 0.20;
somevolume.value = whichStorage["soundboard_gain"];
board.forEach(key=>make_group(booba, key));

function setgain(g){
  gainode.gain.setValueAtTime(g,0);
  whichStorage["soundboard_gain"] = g;
}

whichStorage["soundboard_clockbot_enable"] ??= 0;
clockbot_enable.checked = Number(whichStorage["soundboard_clockbot_enable"]);
clockbot_enable.addEventListener('input', (ev)=>{
  whichStorage["soundboard_clockbot_enable"] = Number(ev.target.checked);
  somevolume.disabled = ev.target.checked;
});
somevolume.disabled = clockbot_enable.checked;

whichStorage["soundboard_clockbot_channel_id"] ??= "";
channel_id.value = whichStorage["soundboard_clockbot_channel_id"];
channel_id.addEventListener('input', (ev)=>{
  whichStorage["soundboard_clockbot_channel_id"] = ev.target.value;
});

write_lovelist();

setTimeout(setup_open);
</script>
</body>
</html>
