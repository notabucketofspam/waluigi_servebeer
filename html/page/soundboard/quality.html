<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="/css/great-scott.css"/>
<meta name="viewport" content="width=device-width, user-scalable=yes"/>
<title>Soundboard - waluigi-servebeer.com</title>
<style>
:where(#love_zone>h2:not(:only-child)){
  color:red
}
#love_zone{
  min-height:4lh;
}
:where(#booba,#love_zone) button {
  margin:2px;
}
#topstuff{
  text-align:center;
}
input{
  accent-color:red;
}
div.sef.lard *{
  user-select:none;
}
#greatanswer{
  margin-bottom:0;
  /*position:absolute;*/
  /*bottom:-90px;*/
  /*right:-45px;*/
}
#where_help{
  font-size:xx-small;
  padding:1px 3.5px;
  cursor:help;
}
span#how2love{
  position:absolute;
  font-size:initial;
}
button.loved::before,button.loved::after{
  content:"<3";
  position:absolute;
  color:white;
  background-color:red;
  font-weight:bold;
  transform:rotate(270deg);
}
button.loved::after{
  margin-left:-14px;
}
</style>
</head>
<body>
<div class="sef lard">
  <div id="topstuff">
    <h1>Soundboard</h1>
    <div>
      <div><input id="somevolume" type="range" step="any" min="0" max="1" value="0.0" oninput="setgain(this.valueAsNumber)"/></div>
      <div>Volume</div>
    </div>
  </div>
  <div id="love_zone">
    <h2>The Sounds You Love<br/>
    <span id="how2love">You can love them with right-click</span id="how2love">
    </h2>
  </div>
  <div id="booba"></div>
  <div id="clockbot_zone">
    <h2>ClockBot</h2>
    <div style="position:relative">
      <div>
        <div>
          <label><input type="checkbox" id="clockbot_enable"/>Enable</label>
          <a href="https://discord.com/oauth2/authorize?client_id=821257635973169193" target="_blank" style="display:inline-block;margin-left:68px;">Install</a>
        </div>
        <div>
          <input type="text" placeholder="Channel ID" id="channel_id" value=""/>
          <button id="where_help" popovertarget="greatanswer">where?</button>
        </div>
        <div>
          <button onclick="getinchat()">get in chat</button>
          <button onclick="leave_chat()">leave chat</button>
        </div>
      </div>
        <dialog id="greatanswer" popover>
          <div>Where's Channel ID? Great question! So...</div>
          <ol style="margin:0">
            <li>Go to &#x26ED;User Settings &rArr; App Settings &ndash; Advanced</li>
            <li>Flip the <b>Developer Mode</b> switch to the <b>on</b> position</li>
            <li>Right-click on a voice channel</li>
            <li><b>Copy Channel ID</b> is at the bottom of the context menu</li>
          </ol>
        </dialog>
    </div>
  </div>
</div>
<script src="/js/everything.js"></script>
<script src="/page/soundboard/cacophony.js"></script>
<script>
whichStorage["soundboard_gain"] ??= 0.20;
somevolume.value = whichStorage["soundboard_gain"];
Object.keys(board).forEach(key=>make_group(booba, board[key]));

function setgain(g){
  gainode.gain.setValueAtTime(g,0);
  whichStorage["soundboard_gain"] = g;
}

whichStorage["soundboard_clockbot_enable"] ??= 0;
clockbot_enable.checked = Number(whichStorage["soundboard_clockbot_enable"]);
clockbot_enable.addEventListener('input', (ev)=>{
  whichStorage["soundboard_clockbot_enable"] = Number(ev.target.checked);
  somevolume.disabled = ev.target.checked;
});
somevolume.disabled = clockbot_enable.checked;

whichStorage["soundboard_clockbot_channel_id"] ??= "";
channel_id.value = whichStorage["soundboard_clockbot_channel_id"];
channel_id.addEventListener('input', (ev)=>{
  whichStorage["soundboard_clockbot_channel_id"] = ev.target.value;
});

write_lovelist();
</script>
</body>
</html>
