<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="/css/great-scott.css"/>
<meta name="viewport" content="width=device-width, user-scalable=yes" />
<title>Meme Gallery - waluigi-servebeer.com</title>
<style>
h1 {
  letter-spacing:0.5ch;
  font-size:2.5rem;
  margin-bottom:0px;
  text-align:center;
}
h2 {
  margin-top:0px;
  text-align:center;
}
#memes {
  display:flex;
  flex: 0 0 0;
  flex-flow: row wrap;
  max-width:24in;
  margin:0 auto;
}
#memes img {
  color: canvastext;
  background-color: canvas;
  inset: 0px;
  margin: auto;
  border-width: initial;
  border-style: solid;
  border-color: initial;
  border-image: initial;
  padding: 0.25em;
  overflow: auto;
}
#memes img {
  width:auto;
  height:2.5in;
  align-self:flex-start;
  display:block;
  margin-top:0.2in;
  max-width:5in;
  min-width:1.5in;
}

#realimage{
  width: clamp(0px, 90vw, 100vw);
  max-height:90vh;
  object-fit:contain;
}
@media (orientation: portrait){
  #realimage{
    width: clamp(0px, 95vw, 100vw);
  }
}
</style>
</head>
<body>
<h1>MEMES</h1>
<h2><span id="meme_count">0</span>pcs set</h2>
<main id="memes">
</main>
<img id="realimage" popover onclick="this.togglePopover()" />
<script src="/js/everything.js"></script>
<script>
var bucket = "https://idazntksvlmn.objectstorage.us-ashburn-1.oci.customer-oci.com/n/idazntksvlmn/b/waluigi_servebeer/o/";
var prefix = "?prefix=image";
var memes = document.getElementById("memes");
var realimage = document.getElementById("realimage");
fetch(bucket+prefix)
.then(response=>response.json())
.then(json=>{
  var lines = json.objects
  .filter(obj=>obj.name.startsWith('image')&&obj.name.includes('.'))
  .map(obj=>`<img src="${bucket+obj.name}" onclick="realimage.setAttribute('src',this.src)||realimage.togglePopover()"/>`);
  memes.insertAdjacentHTML("beforeend", lines.join(''));
  meme_count.innerText = lines.length;
});
</script>
</body>
</html>
